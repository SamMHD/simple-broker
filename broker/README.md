<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# broker

```go
import "github.com/SamMHD/simple-broker/broker"
```

package broker serves a gRPC server which receives messages and logs them to desired destination using zerolog which is a zero allocation structured logger for Go like Uber's zap with a simpler API and even better performance. desired log destination is specified in the configuration file and it can be stdout, stderr or a file. after logging the message, it forwards the message to the destination service using gRPC in the background.

## Index

- [type Server](<#type-server>)
  - [func NewServer(config util.Config) (*Server, error)](<#func-newserver>)
  - [func (server *Server) DialDestinationRPC() error](<#func-server-dialdestinationrpc>)
  - [func (server *Server) Start() error](<#func-server-start>)
  - [func (server *Server) StartGrpcServer() error](<#func-server-startgrpcserver>)
  - [func (server *Server) Stop() (err error)](<#func-server-stop>)
  - [func (server *Server) TransferMessage(ctx context.Context, request *pb.TransferMessageRequest) (*pb.TransferMessageResponse, error)](<#func-server-transfermessage>)


## type [Server](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L25-L36>)

Server is the gRPC server for the Broker it contains configurations, logger and destinationClient which is the gRPC client for the Destination service it also implements the BrokerServiceServer interface which is generated by protoc.

```go
type Server struct {
    pb.UnimplementedBrokerServiceServer // required by the generated interface
    // contains filtered or unexported fields
}
```

### func [NewServer](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L40>)

```go
func NewServer(config util.Config) (*Server, error)
```

NewServer creates a new gRPC server for the Broker. it configures the logger and returns the server object and an error if any.

### func \(\*Server\) [DialDestinationRPC](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L65>)

```go
func (server *Server) DialDestinationRPC() error
```

DialDestinationRPC dials the Destination gRPC server and creates a client for it. in case of an error, it returns the error.

### func \(\*Server\) [Start](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L119>)

```go
func (server *Server) Start() error
```

Start dials destination gRPC server and starts the gRPC server for the Broker. it will block the current thread until the server is stopped. in case of an error, it returns the error and in case of peacefull shutdown, it returns nil.

### func \(\*Server\) [StartGrpcServer](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L90>)

```go
func (server *Server) StartGrpcServer() error
```

StartGrpcServer starts the gRPC server for the Broker. it will block the current thread until the server is stopped. in case of an error, it returns the error and in case of peacefull shutdown, it returns nil.

### func \(\*Server\) [Stop](<https://github.com/SamMHD/simple-broker/blob/main/broker/server.go#L139>)

```go
func (server *Server) Stop() (err error)
```

Stop stops the gRPC server of the Broker. it will close connection to the destination service and stop the gRPC server.

### func \(\*Server\) [TransferMessage](<https://github.com/SamMHD/simple-broker/blob/main/broker/rpc_transfer_message.go#L12>)

```go
func (server *Server) TransferMessage(ctx context.Context, request *pb.TransferMessageRequest) (*pb.TransferMessageResponse, error)
```

TransferMessage is the gRPC handler for the TransferMessage RPC.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
